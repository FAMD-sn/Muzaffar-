<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEGA TERMINAL · как Bybit + Nike, Apple, Tesla</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700;14..32,800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0e17;
            font-family: 'Inter', sans-serif;
            color: #eef2fb;
            padding: 1rem;
            min-height: 100vh;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        /* статус бар */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            background: #101826e0;
            backdrop-filter: blur(12px);
            padding: 0.8rem 1.8rem;
            border-radius: 60px;
            border: 1px solid #293c60;
            box-shadow: 0 10px 30px -10px #00000080;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-size: 1.6rem;
            font-weight: 700;
            background: linear-gradient(145deg, #8ab2ff, #476ee0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #1c2b45;
            padding: 0.4rem 1.2rem;
            border-radius: 40px;
            border: 1px solid #3f6190;
        }

        .pulse {
            width: 10px;
            height: 10px;
            background: #2ecc71;
            border-radius: 50%;
            box-shadow: 0 0 15px #2ecc71;
            animation: pulse 1.8s infinite;
        }

        .connection-status {
            display: flex;
            gap: 20px;
            color: #97b3e6;
        }

        /* основная сетка */
        .terminal-grid {
            display: grid;
            grid-template-columns: 300px 1fr 320px;
            gap: 20px;
            margin-top: 0.8rem;
        }

        /* левая панель — компании и избранное */
        .left-panel {
            background: #0f172b;
            border-radius: 36px;
            padding: 1.5rem 1rem;
            border: 1px solid #2b4062;
            backdrop-filter: blur(4px);
            height: fit-content;
        }

        .search-box {
            background: #1c2942;
            border-radius: 40px;
            padding: 0.6rem 1.2rem;
            margin-bottom: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 1px solid #334e7c;
        }

        .search-box i {
            color: #7f9fdf;
        }

        .search-box input {
            background: transparent;
            border: none;
            color: white;
            width: 100%;
            outline: none;
            font-size: 0.95rem;
        }

        .category {
            margin-bottom: 1.8rem;
        }

        .category-title {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #748bb9;
            margin-bottom: 1rem;
            padding-left: 0.5rem;
        }

        .company-list {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .company-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0.8rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: 0.15s;
            border: 1px solid transparent;
        }

        .company-item:hover {
            background: #1f314f;
            border-color: #3f5f97;
        }

        .company-item.active {
            background: #1f3457;
            border-color: #5b8cff;
            box-shadow: 0 6px 14px #152a55;
        }

        .company-icon {
            width: 32px;
            height: 32px;
            background: #1e2f4b;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffd966;
        }

        .company-info {
            flex: 1;
        }

        .company-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .company-symbol {
            font-size: 0.75rem;
            color: #8da6d9;
        }

        .company-price {
            font-weight: 600;
            color: #d4e2ff;
        }

        .company-change {
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 30px;
        }

        .positive {
            background: #1a3a2a;
            color: #8de9b3;
        }

        .negative {
            background: #3e2630;
            color: #ffa8a3;
        }

        /* центральная часть — график */
        .chart-area {
            background: #0f172b;
            border-radius: 36px;
            padding: 1.5rem;
            border: 1px solid #2b4062;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 15px;
        }

        .symbol-large {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(145deg, #ffffff, #c1d6ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .price-large {
            font-size: 2.2rem;
            font-weight: 800;
            color: #f0f6ff;
        }

        .change-large {
            font-size: 1.1rem;
            padding: 0.3rem 1.2rem;
            border-radius: 40px;
        }

        .timeframe-panel {
            display: flex;
            gap: 6px;
            background: #172338;
            padding: 5px;
            border-radius: 40px;
            border: 1px solid #2d4270;
        }

        .tf-btn {
            background: transparent;
            border: none;
            color: #a7bee9;
            padding: 0.6rem 1.2rem;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.1s;
        }

        .tf-btn.active {
            background: #2b4a9c;
            color: white;
            box-shadow: 0 4px 12px #1b3b88;
        }

        .chart-container {
            width: 100%;
            height: 450px;
            border-radius: 28px;
            overflow: hidden;
            background: #0c1322;
            border: 1px solid #2f4777;
            margin: 1.2rem 0;
        }

        .indicators-bar {
            display: flex;
            gap: 20px;
            color: #90abdf;
            font-size: 0.9rem;
        }

        /* правая панель — стакан и ордера */
        .right-panel {
            background: #0f172b;
            border-radius: 36px;
            padding: 1.5rem 1.2rem;
            border: 1px solid #2b4062;
        }

        .order-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 1.5rem;
        }

        .order-tab {
            flex: 1;
            background: #1c2a43;
            border: none;
            color: white;
            padding: 0.8rem;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
        }

        .order-tab.active {
            background: #29509c;
        }

        .order-book {
            margin-bottom: 2rem;
        }

        .book-header {
            display: flex;
            justify-content: space-between;
            color: #8fa6d7;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }

        .book-row {
            display: flex;
            justify-content: space-between;
            padding: 0.4rem 0;
            font-size: 0.95rem;
        }

        .book-bid {
            color: #50e3a6;
        }

        .book-ask {
            color: #ff8b7a;
        }

        .spread-indicator {
            background: #1d2c4a;
            padding: 0.5rem;
            border-radius: 20px;
            text-align: center;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .order-form {
            margin-top: 1.5rem;
        }

        .order-input {
            background: #1c2a44;
            border: 1px solid #334e82;
            border-radius: 30px;
            padding: 0.9rem 1.2rem;
            width: 100%;
            margin-bottom: 1rem;
            color: white;
        }

        .order-buttons {
            display: flex;
            gap: 10px;
        }

        .buy-btn {
            flex: 1;
            background: #1e8f5c;
            border: none;
            color: white;
            padding: 1rem;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
        }

        .sell-btn {
            flex: 1;
            background: #b23b3b;
            border: none;
            color: white;
            padding: 1rem;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
        }

        .footer-stats {
            margin-top: 2rem;
            color: #5b74a6;
            font-size: 0.8rem;
            text-align: center;
        }

        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.3); }
            100% { opacity: 1; transform: scale(1); }
        }

        /* responsive */
        @media (max-width: 1300px) {
            .terminal-grid {
                grid-template-columns: 250px 1fr 280px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- верхняя панель -->
        <div class="top-bar">
            <div class="logo-area">
                <span class="logo"><i class="fas fa-chart-simple"></i> MEGA·TERMINAL</span>
                <div class="live-indicator">
                    <span class="pulse"></span>
                    <span>LIVE · 12 подключений</span>
                </div>
            </div>
            <div class="connection-status">
                <span><i class="fas fa-database"></i> NYSE · NASDAQ · MOEX</span>
                <span><i class="fas fa-bolt"></i> realtime</span>
            </div>
        </div>

        <!-- терминал -->
        <div class="terminal-grid">
            <!-- левая колонка (компании) -->
            <div class="left-panel">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Поиск компании (Nike, Apple...)" id="searchInput">
                </div>
                
                <div class="category">
                    <div class="category-title"><i class="fas fa-star"></i> избранное</div>
                    <div class="company-list" id="favoriteList">
                        <!-- будет заполнено динамически -->
                    </div>
                </div>

                <div class="category">
                    <div class="category-title"><i class="fas fa-list"></i> все компании</div>
                    <div class="company-list" id="companyList">
                        <!-- динамика через JS -->
                    </div>
                </div>
            </div>

            <!-- центр — график -->
            <div class="chart-area">
                <div class="chart-header">
                    <div style="display: flex; align-items: center; gap: 20px;">
                        <span class="symbol-large" id="activeSymbol">NKE</span>
                        <span class="price-large" id="livePrice">$63.02</span>
                        <span class="change-large positive" id="liveChange">+0.8%</span>
                    </div>
                    <div class="timeframe-panel" id="timeframePanel">
                        <button class="tf-btn active" data-tf="D">1D</button>
                        <button class="tf-btn" data-tf="W">1W</button>
                        <button class="tf-btn" data-tf="M">1M</button>
                        <button class="tf-btn" data-tf="3M">3M</button>
                        <button class="tf-btn" data-tf="12M">1Y</button>
                    </div>
                </div>

                <!-- график TradingView -->
                <div class="chart-container" id="tradingview-container">
                    <!-- сюда вставится виджет -->
                </div>

                <div class="indicators-bar">
                    <span><i class="fas fa-chart-line"></i> RSI 54.2</span>
                    <span><i class="fas fa-arrow-trend-up"></i> MA(20) $62.80</span>
                    <span><i class="fas fa-arrows-up-down"></i> Vol 2.4M</span>
                    <span><i class="fas fa-bolt"></i> Momentum +0.3</span>
                </div>
            </div>

            <!-- правая колонка — стакан/ордера -->
            <div class="right-panel">
                <div class="order-tabs">
                    <button class="order-tab active">Биржа</button>
                    <button class="order-tab">Фьючерсы</button>
                </div>

                <!-- стакан -->
                <div class="order-book">
                    <div class="book-header">
                        <span>Цена (USD)</span>
                        <span>Кол-во</span>
                    </div>
                    <div class="book-row book-ask">
                        <span>63.05</span>
                        <span>1,245 ▲</span>
                    </div>
                    <div class="book-row book-ask">
                        <span>63.04</span>
                        <span>870 ▲</span>
                    </div>
                    <div class="book-row book-ask">
                        <span>63.03</span>
                        <span>2,100 ▲</span>
                    </div>
                    <div class="spread-indicator">
                        <span>спред 0.02 (63.02 / 63.04)</span>
                    </div>
                    <div class="book-row book-bid">
                        <span>63.02</span>
                        <span>1,500 ▼</span>
                    </div>
                    <div class="book-row book-bid">
                        <span>63.01</span>
                        <span>3,200 ▼</span>
                    </div>
                    <div class="book-row book-bid">
                        <span>63.00</span>
                        <span>5,600 ▼</span>
                    </div>
                </div>

                <!-- форма ордера -->
                <div class="order-form">
                    <input type="text" class="order-input" placeholder="Количество" value="100">
                    <input type="text" class="order-input" placeholder="Цена (лимит)" id="orderPrice" value="63.02">
                    <div class="order-buttons">
                        <button class="buy-btn">Купить</button>
                        <button class="sell-btn">Продать</button>
                    </div>
                </div>

                <!-- дополнительно -->
                <div class="footer-stats">
                    <p>Маржа ≈ 3,450 USDT</p>
                    <p>24h объём: 12.4M</p>
                </div>
            </div>
        </div>
    </div>

    <!-- TradingView -->
    <script src="https://s3.tradingview.com/tv.js"></script>
    <script>
        (function() {
            // Данные компаний (полные)
            const companies = [
                { name: 'Nike', symbol: 'NKE', exchange: 'NYSE', icon: 'fa-check', price: 63.02, change: 0.8 },
                { name: 'Apple', symbol: 'AAPL', exchange: 'NASDAQ', icon: 'fa-apple', price: 182.40, change: 0.6 },
                { name: 'Microsoft', symbol: 'MSFT', exchange: 'NASDAQ', icon: 'fa-microsoft', price: 415.20, change: 0.3 },
                { name: 'Tesla', symbol: 'TSLA', exchange: 'NASDAQ', icon: 'fa-car', price: 201.80, change: -1.0 },
                { name: 'NVIDIA', symbol: 'NVDA', exchange: 'NASDAQ', icon: 'fa-microchip', price: 792.10, change: 2.0 },
                { name: 'Amazon', symbol: 'AMZN', exchange: 'NASDAQ', icon: 'fa-amazon', price: 178.50, change: 0.2 },
                { name: 'Meta', symbol: 'META', exchange: 'NASDAQ', icon: 'fa-facebook', price: 485.30, change: 1.1 },
                { name: 'Google', symbol: 'GOOGL', exchange: 'NASDAQ', icon: 'fa-google', price: 162.80, change: -0.1 },
                { name: 'Сбербанк', symbol: 'SBER', exchange: 'MOEX', icon: 'fa-landmark', price: 281.30, change: 0.4 },
                { name: 'Газпром', symbol: 'GAZP', exchange: 'MOEX', icon: 'fa-gas-pump', price: 167.50, change: -0.7 },
                { name: 'Яндекс', symbol: 'YNDX', exchange: 'NASDAQ', icon: 'fa-database', price: 3712.00, change: 1.2 },
                { name: 'Netflix', symbol: 'NFLX', exchange: 'NASDAQ', icon: 'fa-video', price: 610.20, change: 0.9 },
                { name: 'Adidas', symbol: 'ADDYY', exchange: 'OTC', icon: 'fa-shoe-prints', price: 112.40, change: 0.3 },
                { name: 'Nike (доп)', symbol: 'NKE', exchange: 'NYSE', icon: 'fa-check', price: 63.02, change: 0.8 },
                { name: 'Pfizer', symbol: 'PFE', exchange: 'NYSE', icon: 'fa-pills', price: 27.80, change: -0.2 }
            ];

            // Избранное (символы)
            let favorites = ['NKE', 'AAPL', 'TSLA', 'NVDA'];

            let currentSymbol = 'NKE';
            let currentExchange = 'NYSE';
            let currentInterval = 'D';
            let chartWidget = null;

            // Функция рендера списков
            function renderLists(filter = '') {
                const companyListEl = document.getElementById('companyList');
                const favoriteListEl = document.getElementById('favoriteList');
                
                let filtered = companies.filter(c => 
                    c.name.toLowerCase().includes(filter.toLowerCase()) || 
                    c.symbol.toLowerCase().includes(filter.toLowerCase())
                );

                // Убираем дубликаты по символу для красоты (оставляем первые вхождения)
                const unique = new Map();
                filtered.forEach(c => unique.set(c.symbol, c));
                const uniqueCompanies = Array.from(unique.values());

                // Избранное
                const favCompanies = uniqueCompanies.filter(c => favorites.includes(c.symbol));
                const otherCompanies = uniqueCompanies.filter(c => !favorites.includes(c.symbol));

                // строим HTML
                favoriteListEl.innerHTML = favCompanies.map(c => `
                    <div class="company-item ${c.symbol === currentSymbol ? 'active' : ''}" data-symbol="${c.symbol}" data-exchange="${c.exchange}">
                        <div class="company-icon"><i class="fas ${c.icon}"></i></div>
                        <div class="company-info">
                            <div class="company-name">${c.name}</div>
                            <div class="company-symbol">${c.symbol}</div>
                        </div>
                        <div class="company-price">$${c.price.toFixed(2)}</div>
                        <div class="company-change ${c.change >= 0 ? 'positive' : 'negative'}">${c.change >= 0 ? '+' : ''}${c.change}%</div>
                    </div>
                `).join('');

                companyListEl.innerHTML = otherCompanies.map(c => `
                    <div class="company-item ${c.symbol === currentSymbol ? 'active' : ''}" data-symbol="${c.symbol}" data-exchange="${c.exchange}">
                        <div class="company-icon"><i class="fas ${c.icon}"></i></div>
                        <div class="company-info">
                            <div class="company-name">${c.name}</div>
                            <div class="company-symbol">${c.symbol}</div>
                        </div>
                        <div class="company-price">$${c.price.toFixed(2)}</div>
                        <div class="company-change ${c.change >= 0 ? 'positive' : 'negative'}">${c.change >= 0 ? '+' : ''}${c.change}%</div>
                    </div>
                `).join('');

                // добавляем обработчики
                document.querySelectorAll('.company-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const symbol = this.dataset.symbol;
                        const exchange = this.dataset.exchange;
                        switchCompany(symbol, exchange);
                    });
                });
            }

            // Переключение компании
            function switchCompany(symbol, exchange) {
                currentSymbol = symbol;
                currentExchange = exchange;

                // обновить активный класс
                document.querySelectorAll('.company-item').forEach(item => {
                    if (item.dataset.symbol === symbol) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });

                // обновить заголовок
                document.getElementById('activeSymbol').innerText = symbol;
                
                // найти компанию для цены
                const company = companies.find(c => c.symbol === symbol);
                if (company) {
                    document.getElementById('livePrice').innerText = `$${company.price.toFixed(2)}`;
                    document.getElementById('liveChange').innerText = `${company.change >= 0 ? '+' : ''}${company.change}%`;
                    document.getElementById('liveChange').className = `change-large ${company.change >= 0 ? 'positive' : 'negative'}`;
                }

                // перезагрузить график
                loadTradingViewChart(symbol, exchange, currentInterval);
            }

            // TradingView
            function loadTradingViewChart(symbol, exchange, interval) {
                let market = exchange;
                if (exchange === 'NASDAQ') market = 'NASDAQ';
                else if (exchange === 'MOEX') market = 'MOEX';
                else if (exchange === 'OTC') market = 'OTC';
                
                let ticker = `${market}:${symbol}`;
                if (symbol === 'YNDX') ticker = 'NASDAQ:YNDX';
                if (symbol === 'ADDYY') ticker = 'OTC:ADDYY';

                const container = document.getElementById('tradingview-container');
                container.innerHTML = '';

                if (typeof TradingView !== 'undefined') {
                    chartWidget = new TradingView.widget({
                        container_id: 'tradingview-container',
                        width: '100%',
                        height: '100%',
                        symbol: ticker,
                        interval: interval,
                        timezone: 'exchange',
                        theme: 'dark',
                        style: '1',
                        locale: 'ru',
                        toolbar_bg: '#0f172b',
                        enable_publishing: false,
                        hide_side_toolbar: false,
                        allow_symbol_change: true,
                        studies: ['RSI@tv-basicstudies', 'MASimple@tv-basicstudies'],
                        show_popup_button: true,
                        popup_width: '1000',
                        popup_height: '650',
                        support_host: 'https://www.tradingview.com'
                    });
                }
            }

            // поиск
            document.getElementById('searchInput').addEventListener('input', (e) => {
                renderLists(e.target.value);
            });

            // таймфреймы
            document.querySelectorAll('.tf-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.tf-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentInterval = this.dataset.tf;
                    loadTradingViewChart(currentSymbol, currentExchange, currentInterval);
                });
            });

            // Инициализация
            window.addEventListener('load', () => {
                renderLists();
                loadTradingViewChart('NKE', 'NYSE', 'D');
                
                // цена в ордере подстраивается под активную
                setInterval(() => {
                    const company = companies.find(c => c.symbol === currentSymbol);
                    if (company) {
                        document.getElementById('orderPrice').value = `$${company.price.toFixed(2)}`;
                    }
                }, 2000);
            });
        })();
    </script>
</body>
</html>
